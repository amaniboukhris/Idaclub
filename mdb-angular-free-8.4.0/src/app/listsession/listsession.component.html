<html>

    <nav class="navbar navbar-expand-sm bg- navbar-">
        <a class="navbar-brand" href="#">
            <img id="img" class="animated bounce infinite" alt="Brand" src="../../../assets/images/=abc.png">
          </a>
      <form class="form-inline" action="">
        <div class="input-group">
          <app-search [(searchModel)]="searchModel"></app-search>
          <div class="input-group-append">
                <button  class="btnh" type="button">
                  <i  class="fa fa-search"></i>
                </button>
              </div>
        </div>
      </form>
      <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link"   routerLink="/accueil/email">Accueil</a>
          </li>
          <li class="nav-item">
            <a class="nav-link"  routerLink="/clienDoeil" data-toggle="collapse">IdaClub en un clin d'oeil</a>
          <li class="nav-item">
            <a class="nav-link"    routerLink="/GestCar"  data-toggle="collapse">Gestion des carriéres</a>
          </li>
          <li class="nav-item">
            <a class="nav-link"  routerLink="/login" data-toggle="collapse">Déconnexion</a>
          </li>
      </ul>
      </nav>
<app-sidenav></app-sidenav>
<body>
<br>
<div id="tt">
<div class="alert alert-info" role="alert"*ngIf="message">{{message}}</div>
</div>
<div class="row">
  <h1>Back office (IDAC):Liste des sessions</h1>
  <div style="padding-bottom: 10px;padding-top: 10px; margin-left: 750px" >  
      <div class="row">  
        <div class="col-sm-12">  
        <button (click)="ExportTOExcel()" class="btn btn-success">Exporter en Excel</button> </div>  
        </div>  
      </div> 
 <div #table > 
    <table id="table" mdbTable responsive="true" text-center hover="true" mdbTableScroll  scrollY="true" maxHeight="500" scrollX="true" maxWidth="1050"  bordered="true">
      <thead class="thead-dark">
            <tr>
                <th>id</th>
                <th>Titre</th>
                <th>Formation </th>
                <th>Nombre d'heures</th>
                <th>Effectif</th>
                <th>Programme de la formation</th>
                <th>Prix</th>
                <th>image</th>
                <th>modifier</th>
                <th>supprimer</th>
                <th>Commentaires</th>
    
            </tr>
      </thead>
    <tbody>
            <tr id="aa" *ngFor="let s of sessions | flterSession: searchModel">
              <td>{{s.id}}</td>
                <td>{{s.titre}}</td>
                <td>{{s.formation}}</td>
                <td>{{s.nbreHeures}} personne</td>
                <td>{{s.effectif}} hr</td>
                <td>{{s.programme}}</td>
                <td>{{s.prix}} dt</td>
                <td style="width:100px;" > <img  class="img-fluid img-thumbnail" [src]="images[s.id-1]" class="test" ></td>

                <td><button (click)="updateSession(s.id)" class="btn btn-primary">Modifier</button></td>
    
                <td><button (click)="deleteSession(s.id)" class="btn btn-danger">Supprimer</button></td>
                <td >
                  <button (click)="RefrechCommentSession(s.id)" type="button" mdbBtn class="example hoverable" class="btn btn-success" rounded="true" data-toggle="modal" data-target="#basicExample" (click)="frame.show()"
mdbWavesEffect>Voir</button>
<div mdbModal #frame="mdbModal" class="modal fade top" id="frameModalTop" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog  modal-notify modal-primary" role="document">
    <!--Content-->
    <div class="modal-content">
      <!--Header-->
      <div class="modal-header">
        <p class="heading lead">Liste des commentaires pour Session:{{s.formation}}</p>

        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="frame.hide()">
          <span aria-hidden="true" class="white-text">&times;</span>
        </button>
      </div>
<!--Body-->
<div class="modal-body">
  <table mdbTable responsive="true" text-center hover="true" mdbTableScroll  scrollY="true" maxHeight="400" scrollX="true" maxWidth="1050"  bordered="true"  *ngIf=comments>

      <thead class="thead-dark" >
          <tr>
              <th>Message </th>
              <th>Date</th>
              <th>Email</th>   
              <th>IdUser</th>
              <th>Supprimer</th>
      
            
          </tr>
      </thead>
  
      <tbody >
          <tr  *ngFor="let c of s.commentaires"  >
           
              <td>{{c.message}}</td>
              <td>{{c.date|date|uppercase}}</td>
              <td>{{c.email}}</td>
              <td>{{c.iduser}}</td>
              <td><button (click)="deletComment(s.id, c.id)" class="btn btn-danger" >Supprimer</button></td>
          </tr>
      </tbody>
  </table>        

</div>

<!--Footer-->
<!--<div class="modal-footer justify-content-center">

<a type="button" mdbBtn color="primary" outline="true" class="waves-effect" mdbWavesEffect (click)="frame.hide()">No, thanks</a>
</div>-->
</div>
<!--/.Content-->
</div>
</div>            
</td>
            </tr>
    </tbody>

</table>
</div>
</div>
</body>
<button id="btna" (click)="addSession()" class="btn btn-success">Ajouter une Session </button>

</html>





